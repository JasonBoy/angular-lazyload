/**
 * @license
 * Angular directive for lazy loading while swiping up, especially for swiping up in mobile
 * https://github.com/JasonBoy/angular-lazyload#readme
 * License: MIT
 */
!function(e,t){"use strict";var i=t.module("lazyload",[]);i.directive("lazyload",[function(){return{restrict:"A",scope:{container:"@",swipeText:"@",loadingText:"@",offsetBottom:"@"},link:function(t,i,n){function o(e){v=e.changedTouches[0].pageY}function a(n){if(!t.lazyLoading&&!g){var o=i[0].getBoundingClientRect();h=n.changedTouches[0].pageY,u=e.screen.availHeight-o.bottom>l,u&&(i.html(s),i.css("visibility","visible"))}}function d(e){return!g&&u&&v-h>=l?(i.html(c),t.lazyLoading=!0,void t.$emit("lazyLoading")):void i.css("visibility","hidden")}i.css("visibility","hidden"),t.lazyLoading=!1;var s=t.swipeText||"slide up to load more...",c=t.loadingText||"loading...";i.html(s);var r=t.container?document.querySelector(t.container):e.document,l=isNaN(parseInt(t.offsetBottom))?50:parseInt(t.offsetBottom),u=!1,v=0,h=0,g=!1;r.addEventListener("touchstart",o),r.addEventListener("touchmove",a),r.addEventListener("touchend",d),t.$on("lazyLoadingFinished",function(){t.lazyLoading=!1,i.css("visibility","hidden")}),t.$on("allLoaded",function(){g=!0,i.css("visibility","hidden"),r.removeEventListener("touchstart",o),r.removeEventListener("touchmove",a),r.removeEventListener("touchend",d)})}}}])}(window,window.angular);