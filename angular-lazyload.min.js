/**!
 * @license
 * Angular directive for lazy loading while swiping up, especially for swiping up in mobile
 * https://github.com/JasonBoy/angular-lazyload#readme
 * License: MIT
 */
!function(i,t){"use strict";var n=t.module("lazyload",[]);n.directive("lazyload",["$timeout",function(t){return{restrict:"A",scope:{loadingText:"@",offsetBottom:"@",waitDuration:"@",scale:"="},link:function(n,o,a){function e(){if(!n.lazyLoading&&!c){var i=u.getBoundingClientRect(),a=screen.availHeight;(f||g)&&a-i.bottom*n.scale>=d&&(g=!1,l||o.html(s),n.lazyLoading=!0,o.css("visibility","visible"),t(function(){n.$emit("lazyLoading")},r))}}var l=!!o.html();o.css("visibility","hidden"),n.lazyLoading=!1,n.scale||(n.scale=1);var s=n.loadingText||"loading...",d=isNaN(Number(n.offsetBottom))?10:Number(n.offsetBottom),r=isNaN(Number(n.waitDuration))?500:Number(n.waitDuration),c=!1,u=o[0],f=!0,g=!0;n.$on("lazyLoadingFinished",function(){n.lazyLoading=!1,o.css("visibility","hidden")}),n.$on("allLoaded",function(){c=!0,n.lazyLoading=!1,o.css("visibility","hidden"),i.removeEventListener("scroll",e,!1)}),i.addEventListener("scroll",e,!1)}}}])}(window,window.angular);